(()=>{const e="http://localhost:3001",t=document.getElementById("fname"),n=document.getElementById("lname"),i=document.getElementById("pnumber"),a=document.getElementById("addBtn"),d=document.getElementById("errormsg"),s=document.getElementById("book"),o=document.getElementById("showAll"),l=document.getElementById("hideAll");function r(t,n){const i=document.createElement("tr"),a=document.createElement("td"),d=document.createElement("td"),o=document.createElement("td"),l=document.createElement("td");a.innerText=t,d.innerText=n,o.innerText="Favorites",l.innerText="Delete",o.classList.add("cursorPink"),l.classList.add("cursorRed"),o.addEventListener("click",(function(){i.classList.toggle("favorite")})),l.addEventListener("click",(async function(){await async function(t,n){let i;t.remove();const a=await axios.get(`${e}/api/persons`);for(let e=0;e<a.data.length;e++)a.data[e].name===n&&(i=a.data[e].id);await axios.delete(`${e}/api/persons/${i}`)}(i,t)})),i.classList.add("dropDownDiv"),a.append(o),a.append(l),i.append(a),i.append(d),s.append(i)}a.addEventListener("click",(async function(){const a=t.value,s=n.value,o=i.value,l=a+" "+s;if(!t.value)return d.innerText="Please Enter The First Name",void setTimeout((()=>{d.innerText=""}),2e3);if(!n.value)return d.innerText="Please Enter The Last Name",void setTimeout((()=>{d.innerText=""}),2e3);if(!i.value)return d.innerText="Please Enter The Phone Number",void setTimeout((()=>{d.innerText=""}),2e3);try{const t=await axios.post(`${e}/api/persons`,{name:l,number:o});d.innerText=t.data,setTimeout((()=>{d.innerText=""}),3e3),r(l,o)}catch(e){d.innerText=e.response.data,setTimeout((()=>{d.innerText=""}),3e3)}})),o.addEventListener("click",(async function(){await async function(){const t=await axios.get(`${e}/api/persons`);for(let e=0;e<t.data.length;e++)r(t.data[e].name,t.data[e].number)}(),o.style.visibility="hidden",l.style.visibility="visible"})),l.addEventListener("click",(function(){const e=s.childElementCount;for(let t=0;t<e-1;t++)s.removeChild(s.lastChild);l.style.visibility="hidden",o.style.visibility="visible"}))})();